---
# yaml-language-server: $schema=https://kubernetes-schemas.devbu.io/externalsecret_v1beta1.json
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: authelia-external
  namespace: default
spec:
  secretStoreRef:
    kind: ClusterSecretStore
    name: onepassword-connect
  target:
    name: authelia-external
    creationPolicy: Owner
    template:
      engineVersion: v2
      data:
        STORAGE_ENCRYPTION_KEY: "${SESSION_ENCRYPTION_KEY}"
        SESSION_ENCRYPTION_KEY: "${SESSION_ENCRYPTION_KEY}"
        LDAP_PASSWORD: "{{ .search_revealed_password }}"
        JWT_KEY: "${JWT_TOKEN}"
        OIDC_PRIVATE_KEY: |
          -----BEGIN RSA PRIVATE KEY-----
          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
          -----END RSA PRIVATE KEY-----
        OIDC_HMAC_SECRET: "${SESSION_ENCRYPTION_KEY}"
  dataFrom:
    - extract:
        key: glauth
